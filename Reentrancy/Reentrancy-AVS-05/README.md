## Vulnerable Code

```javascript
function buy(bytes8 referralCode) internal {
        require(msg.value>=minEthValue);
        require(now < saleEnd4); // main sale postponed

        // distribution for referral
        uint256 remainEth = msg.value;
        if (referral[referralCode] != msg.sender && renownedPlayers[referral[referralCode]].isRenowned)
        {
            uint256 referEth = msg.value.mul(10).div(100);
            referral[referralCode].transfer(referEth);  //Vulnerable position_1
            remainEth = remainEth.sub(referEth);
        }

        if (!renownedPlayers[msg.sender].isRenowned)
        {
            generateRenown();
        }
        
        uint256 amount = manager.getYumerium(msg.value, msg.sender);    //Vulnerable position_2
        uint256 total = totalSaled.add(amount);
        owner.transfer(remainEth);
        
        require(total<=maxSale);
        
        totalSaled = total;
        
        emit Contribution(msg.sender, amount);
}
```



## Exploit Code

```javascript

```



##  Sophisticated Vulnerability Description

